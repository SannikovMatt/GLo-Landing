(()=>{"use strict";function e(e,n){var o;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(o=function(e,n){if(e){if("string"==typeof e)return t(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){o&&(e=o);var r=0,c=function(){};return{s:c,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==o.return||o.return()}finally{if(l)throw a}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var n,o,r,c,a,i,l,s,u,d,m,v,f,p,y,h,g,L,S;g=document.querySelector("#timer-hours"),L=document.querySelector("#timer-minutes"),S=document.querySelector("#timer-seconds"),function e(){var t,n,o,r,c=(t=(new Date("2021/12/31").getTime()-(new Date).getTime())/1e3,(n=Math.floor(t%60))<9&&(n="0"+n),(o=Math.floor(t/60%60))<9&&(o="0"+o),(r=Math.floor(t/60/60))<9&&(r="0"+r),{timeRemaining:t,hours:r,min:o,seconds:n});c.timeRemaining>0?(g.innerHTML=c.hours,L.innerHTML=c.min,S.innerHTML=c.seconds,setTimeout(e,1e3)):(g.innerHTML="00",L.innerHTML="00",S.innerHTML="00")}(),document.body.addEventListener("click",(function(e){var t=document.querySelector("menu"),n=e.target,o=function(){t.classList.toggle("active-menu")},r=function(e){var t,n=e.getAttribute("href"),o=document.querySelector("".concat(n)),r=document.documentElement.scrollTop,c=0,a=0;!function e(){1===a&&(document.documentElement.scrollTop=r),document.documentElement.scrollTop>=o.offsetTop||window.innerHeight+window.scrollY>=document.body.offsetHeight?cancelAnimationFrame(t):(document.documentElement.scrollTop=c,c+=parseInt((o.offsetTop-c)/7+1),t=requestAnimationFrame(e),a++)}()};n.closest("menu")||(t=document.querySelector("menu")).classList.contains("active-menu")&&o(),n.closest(".menu")&&n.closest(".menu")&&o(),n.closest("menu")&&(n.closest(".close-btn")?o():n.closest("a")&&(t.classList.contains("active-menu")&&o(),r(n.closest("a")))),n.closest('main a[href="#service-block"]')&&(t.classList.contains("active-menu")&&o(),r(n.closest("a")))})),p=document.querySelector(".popup"),y=document.querySelectorAll(".popup-btn"),h=p.querySelector(".popup-content"),y.forEach((function(e){e.addEventListener("click",(function(){var e,t;p.style.display="block",t=1,p.style.display="block",screen.width<768||function n(){t>=10?cancelAnimationFrame(e):(h.style.top=t+"%",t+=(parseInt(h.style.top)-t)/7+1,e=requestAnimationFrame(n))}()}))})),p.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?p.style.display="none":t.closest(".popup-content")||(p.style.display="none")})),m=document.querySelector(".service-header"),v=m.querySelectorAll(".service-header-tab"),f=document.querySelectorAll(".service-tab"),m.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&v.forEach((function(e,n){var o;e===t&&(o=n,f.forEach((function(e,t){o===t?(e.classList.remove("d-none"),v[t].classList.add("active")):(e.classList.add("d-none"),v[t].classList.remove("active"))})))}))})),o=document.querySelector(".portfolio-content"),r=o.querySelectorAll(".portfolio-item"),c=o.querySelector(".portfolio-dots"),a=0,i=o.querySelectorAll(".dot"),l=function(e,t,n){e[t].classList.add(n)},s=function(e,t,n){e[t].classList.remove(n)},u=function(){s(r,a,"portfolio-item-active"),s(i,a,"dot-active"),++a>=r.length&&(a=0),l(r,a,"portfolio-item-active"),l(i,a,"dot-active")},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;n=setInterval(u,e)},o.addEventListener("click",(function(e){e.preventDefault();var t=e.target;t.matches(".dot, .portfolio-btn")&&(s(r,a,"portfolio-item-active"),s(i,a,"dot-active"),t.matches("#arrow-right")?a++:t.matches("#arrow-left")?a--:t.matches(".dot")&&i.forEach((function(e,n){e===t&&(a=n)})),a>=r.length?a=0:a<0&&(a=r.length-1),l(r,a,"portfolio-item-active"),l(i,a,"dot-active"))})),o.addEventListener("mouseover",(function(e){var t=e.target;(t.matches(".portfolio-btn")||t.matches(".dot"))&&clearInterval(n)})),o.addEventListener("mouseout",(function(e){var t=e.target;(t.matches(".portfolio-btn")||t.matches(".dot"))&&d()})),r.forEach((function(){c.insertAdjacentHTML("beforeend",'<li class="dot"></li>')})),(i=o.querySelectorAll(".dot"))[0].classList.add("dot-active"),d(2e3),document.querySelector("#command").addEventListener("mouseover",(function(e){var t=e.target;if(t.closest(".command__photo")){var n=t.closest(".command__photo"),o=n.getAttribute("src");n.src=n.dataset.img,n.addEventListener("mouseleave",(function e(){n.src=o,n.removeEventListener("mouseleave",e)}))}})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.getElementById("calc"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),r=document.querySelector(".calc-day"),c=document.getElementById("total"),a=document.querySelector(".calc-count"),i=function(){var t=0,i=1,l=1,s=n.options[n.selectedIndex].value,u=+o.value;a.value>1&&(i+=(a.value-1)/10),r.value&&r.value<5?l*=2:r.value&&r.value<10&&(l*=1.5),s&&u&&(t=e*s*u*i*l);var d=0,m=setInterval((function(){c.textContent=d,((d+=parseInt(t/20))>=t||d+t/20>t)&&(c.textContent=parseInt(t),clearInterval(m),d=0)}),20)};t.addEventListener("change",(function(e){var t=e.target;[n,o,r,a].includes(t)&&i()})),t.addEventListener("input",(function(e){var t=e.target.closest(".calc-item");t&&!t.classList.contains("calc-type")&&(t.value=t.value.replace(/[^0-9]/,""))}))}(100),function(){var t,n=document.createElement("div"),o=!1;n.style.color="white",window.addEventListener("submit",(function(o){var c=o.target;if(c.closest("#".concat(c.id))){var a=c.closest("#".concat(c.id));if(o.preventDefault(),a.appendChild(n),!r(a))return t&&clearTimeout(t),void(t=setTimeout((function(){n.textContent=""}),3e3));n.classList.toggle("loader");var i,l={},s=e(new FormData(a).entries());try{for(s.s();!(i=s.n()).done;){var u=i.value;l[u[0]]=u[1]}}catch(e){s.e(e)}finally{s.f()}(function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"aplication/json"},body:JSON.stringify(e)}).then((function(e){if(!e.ok)throw new Error(e.status)}))})(l).then((function(){n.classList.toggle("loader"),n.textContent="Сообщение отправлено",setTimeout((function(){n.textContent=""}),5e3),a.reset()})).catch((function(e){n.classList.toggle("loader"),n.textContent="Чтото пошло не так",console.error(e)}))}}));var r=function(t){var r,c=e(t.querySelectorAll("input"));try{for(c.s();!(r=c.n()).done;){var a=r.value;if("email"===a.id.split("-")[1]&&!(o=/[\w0-9.]+@\w+\.\w{0,6}/i.test(a.value)))return n.innerHTML="Заявка не отправлена <br/>Проверьте корректность емаил..",o}}catch(e){c.e(e)}finally{c.f()}return o};document.addEventListener("input",(function(e){var t=e.target;if(t.closest("form")){var n=t.id.split("-")[1];"message"===n?t.value=t.value.replace(/[A-Za-z]/,""):"phone"===n?t.value=t.value.replace(/[^\+{,1}(\d+)$]/g,""):"name"===n?t.value=t.value.replace(/[^а-я ]/gi,""):"email"===n&&(t.value=t.value.replace(/[^@.0-9\w]/gi,""))}}))}()})();